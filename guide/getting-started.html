<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>快速上手 | icefox</title>
    <meta name="description" content="基于 ElementUI 的企业中后台应用框架❤️">
    
    
    <link rel="preload" href="/assets/css/0.styles.3f25eecc.css" as="style"><link rel="preload" href="/assets/js/app.488be3da.js" as="script"><link rel="preload" href="/assets/js/2.3e762a60.js" as="script"><link rel="prefetch" href="/assets/js/10.5e8c0265.js"><link rel="prefetch" href="/assets/js/11.b6872ef1.js"><link rel="prefetch" href="/assets/js/12.6499d39a.js"><link rel="prefetch" href="/assets/js/13.8beb6b76.js"><link rel="prefetch" href="/assets/js/14.6f312275.js"><link rel="prefetch" href="/assets/js/15.7f7a4725.js"><link rel="prefetch" href="/assets/js/16.fbadca78.js"><link rel="prefetch" href="/assets/js/17.e4752a57.js"><link rel="prefetch" href="/assets/js/18.dc99ea95.js"><link rel="prefetch" href="/assets/js/19.5c685458.js"><link rel="prefetch" href="/assets/js/20.5ea4e7d9.js"><link rel="prefetch" href="/assets/js/21.394e4747.js"><link rel="prefetch" href="/assets/js/22.c22bfe45.js"><link rel="prefetch" href="/assets/js/23.55217ea0.js"><link rel="prefetch" href="/assets/js/24.7efcb354.js"><link rel="prefetch" href="/assets/js/25.a414cf5a.js"><link rel="prefetch" href="/assets/js/26.f5a54f5f.js"><link rel="prefetch" href="/assets/js/27.5fe17a91.js"><link rel="prefetch" href="/assets/js/3.5be415c3.js"><link rel="prefetch" href="/assets/js/4.f29072a0.js"><link rel="prefetch" href="/assets/js/5.76400afa.js"><link rel="prefetch" href="/assets/js/6.fe0024a0.js"><link rel="prefetch" href="/assets/js/7.7a1dff7c.js"><link rel="prefetch" href="/assets/js/8.96da46b8.js"><link rel="prefetch" href="/assets/js/9.3c00e0bf.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3f25eecc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">icefox</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/introduce.html" class="nav-link">指南</a></div><div class="nav-item"><a href="/component/installation.html" class="nav-link">组件</a></div><div class="nav-item"><a href="/config/builder.html" class="nav-link">配置</a></div> <a href="https://github.com/icesjs/ices" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/introduce.html" class="nav-link">指南</a></div><div class="nav-item"><a href="/component/installation.html" class="nav-link">组件</a></div><div class="nav-item"><a href="/config/builder.html" class="nav-link">配置</a></div> <a href="https://github.com/icesjs/ices" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>指南</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/introduce.html" class="sidebar-link">介绍</a></li><li><a href="/guide/getting-started.html" class="active sidebar-link">快速上手</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/getting-started.html#环境准备" class="sidebar-link">环境准备</a></li><li class="sidebar-sub-header"><a href="/guide/getting-started.html#脚手架" class="sidebar-link">脚手架</a></li><li class="sidebar-sub-header"><a href="/guide/getting-started.html#使用-icefox-组件" class="sidebar-link">使用 icefox 组件</a></li><li class="sidebar-sub-header"><a href="/guide/getting-started.html#约定式路由" class="sidebar-link">约定式路由</a></li><li class="sidebar-sub-header"><a href="/guide/getting-started.html#接口请求与-mock" class="sidebar-link">接口请求与 Mock</a></li><li class="sidebar-sub-header"><a href="/guide/getting-started.html#发布预览与部署" class="sidebar-link">发布预览与部署</a></li></ul></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>进阶</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/guide/mock.html" class="sidebar-link">Mock 数据</a></li><li><a href="/guide/request.html" class="sidebar-link">数据请求</a></li><li><a href="/guide/routing.html" class="sidebar-link">约定式路由</a></li><li><a href="/guide/store-module.html" class="sidebar-link">Store 模块化</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="快速上手"><a href="#快速上手" aria-hidden="true" class="header-anchor">#</a> 快速上手</h1> <p>以下名称 <strong>ut-builder</strong> 均指构建工具 <a href="https://www.npmjs.com/package/vue-cli-plugin-ut-builder" target="_blank" rel="noopener noreferrer">vue-cli-plugin-ut-builder<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，
其本质上是 <a href="https://cli.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">@vue/cli<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的插件。</p> <h2 id="环境准备"><a href="#环境准备" aria-hidden="true" class="header-anchor">#</a> 环境准备</h2> <p>首先，你需要安装 <a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">Node.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 运行环境。</p> <p>构建工具 ut-builder 依赖 <strong>8.3.0</strong> 以上版本的 node 运行环境。
因为从这一版本开始， node 运行环境提供了较完善的解构语法支持。</p> <div class="tip custom-block"><p class="custom-block-title">提示</p> <p>早期 1.x.x 版本的 ut-builder 最低是支持到 8.0.0 版本 node 的，由于此版本 node 的解构语法支持不完善，
又不想使用转译，写代码太难受，所以从 2.x.x 起就要求 8.3.0 以上 node 版本了。 😂</p></div> <div class="warning custom-block"><p class="custom-block-title">提示</p> <p>如果你需要使用 @vue/cli 提供的脚手架来初始化创建工程的话，那么就需要安装至少 8.9.x 以上版本的 node。</p></div> <p>开发环境下，推荐尽量安装最新 <strong>LTS</strong> 版本的 <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener noreferrer">node<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>另外，你还可以使用 <a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener noreferrer">nvm<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
或 <a href="https://github.com/coreybutler/nvm-windows" target="_blank" rel="noopener noreferrer">nvm-windows<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 来管理你本地的 node 版本。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 查看已安装的 node 版本</span>
node -v
</code></pre></div><p>相应地，在 node 环境下，你需要使用<strong>包管理器</strong>来管理项目依赖。</p> <p>你可以使用 <a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer">npm<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 或者 <a href="https://www.yarnpkg.com/zh-Hans/" target="_blank" rel="noopener noreferrer">yarn<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 来管理你的依赖包。
<strong>这里的示例都将以 npm 作为包管理器</strong>。</p> <p>为提升安装效率，你还需要切换下包管理器默认的下载仓库源。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 切换 npm 仓库源至国内镜像源，提升包下载速率</span>
<span class="token function">npm</span> config <span class="token keyword">set</span> registry https://registry.npm.taobao.org
</code></pre></div><p>如果你需要频繁切换不同的源，<a href="https://github.com/Pana/nrm" target="_blank" rel="noopener noreferrer">nrm<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>(<strong>npm registry manager</strong>) 会是一个不错的工具。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 全局安装 npm 仓库源管理工具 nrm</span>
<span class="token function">npm</span> i nrm -g

<span class="token comment"># 查看可用的镜像源</span>
<span class="token comment"># nrm ls</span>

<span class="token comment"># 切换到国内源</span>
nrm use taobao
</code></pre></div><h2 id="脚手架"><a href="#脚手架" aria-hidden="true" class="header-anchor">#</a> 脚手架</h2> <p><strong>ut-builder</strong> 本身并没有提供完整的脚手架工具，因为 @vue/cli 提供的脚手架已经足够好用了。甚至你还可以基于 @vue/cli 的配置，定制或开发自己喜欢的脚手架。</p> <p>另外，<a href="/guide/introduce.html#构建工具">前面</a> 我们也了解到，ut-builder 本身就是一个 @vue/cli 插件。
所以，你可以<strong>先使用 @vue/cli 初始化创建工程，然后再添加 <a href="https://www.npmjs.com/package/vue-cli-plugin-ut-builder" target="_blank" rel="noopener noreferrer">ut-builder<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 插件</strong>。</p> <p>如果你只想单独使用 ut-builder 这个插件也是可以的，甚至你还可以只使用 icefox 包里面的一些组件。
后面我们会提一些需要注意的地方，但在这里，推荐你按照下面的示例，先创建一个完整的示例项目。</p> <p>首先我们需要 <strong>安装 vue 官方命令行构建工具</strong>：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 老版本命令行工具会对新版工具造成影响</span>
<span class="token comment"># 如果已安装过老版工具，你需要先卸载它</span>
<span class="token comment"># npm uninstall vue-cli -g</span>

<span class="token comment"># 全局安装 @vue/cli 命令行构建工具</span>
<span class="token function">npm</span> i @vue/cli -g
</code></pre></div><p>你也可以在 <a href="https://cli.vuejs.org/zh/guide/installation.html" target="_blank" rel="noopener noreferrer">这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 了解下 vue 官方关于命令行构建工具的安装说明。</p> <p>接下来我们创建一个示例项目：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 在合适的工作目录下，创建一个名为 hello-world 的项目</span>
vue create hello-world
</code></pre></div><p>交互式命令行会提示你选择一些构建特性，你可以根据你的需要来选择，然后脚手架就会帮我们创建好项目的基本结构了。</p> <div class="tip custom-block"><p class="custom-block-title">提示</p> <p>icefox <strong>内置的主题样式是基于 Less 预编译样式语言</strong>的，这里我们推荐你在选择样式预处理器(CSS Pre-processors)时，将 <strong>Less</strong> 选上。
其他一些特性，比如 Babel、Linter / Formatter、Router、Vuex，一般都是需要的了。
代码风格配置选项里，ESLint + Prettier 的组合还不错。最后将配置文件单独外置，在需要以编程方式进行配置时将会更加便利。</p></div> <p><a href="https://cli.vuejs.org/zh/guide/creating-a-project.html" target="_blank" rel="noopener noreferrer">这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是 vue 官方使用命令行工具创建项目的详细示例，有兴趣的话你也可以过去瞧瞧。</p> <p>创建好项目后，我们还需要添加下 <a href="https://github.com/icesjs/vue-cli-builder#readme" target="_blank" rel="noopener noreferrer">ut-builder<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 插件。
在安装插件前，推荐你先看一下 vue 官方关于 <a href="https://cli.vuejs.org/zh/guide/plugins-and-presets.html" target="_blank" rel="noopener noreferrer">命令行工具插件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的说明，
当然往后你再去了解也是可以的。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 进入到示例项目根目录</span>
<span class="token function">cd</span> hello-world

<span class="token comment"># 添加 ut-builder 插件</span>
vue <span class="token function">add</span> ut-builder

<span class="token comment"># 或者直接使用 npm 安装开发依赖（注意依赖名称与上面的不同）</span>
<span class="token comment"># npm i vue-cli-plugin-ut-builder -D</span>
</code></pre></div><p>安装完成后，就可以运行命令，看看效果了。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 启动开发服务器</span>
<span class="token function">npm</span> run serve
</code></pre></div><p>如果没有遇到错误的话，你应该会看到类似下面这样的控制台输出，这里我们也暂且不需要了解这些输出项的意义。</p> <p><img src="/assets/img/build-completed.37b53845.png" alt="构建成功"></p> <div class="tip custom-block"><p class="custom-block-title">提示</p> <p>2.x.x 以上版本的 ut-builder 在运行后会默认将 icefox 添加进 package.json 的依赖声明中，
这是因为 icefox 为内置的组件提供了声明文件，以便在 IDE（如：WebStorm）中获取编辑器智能提示的能力，而前提是需要将包添加进项目依赖声明中。
另外，deploy、stage 两个 npm 脚本命令也会被添加进 package.json 中。</p></div> <div class="warning custom-block"><p class="custom-block-title">提示</p> <p>虽然你还可以安装其他的 @vue/cli 插件来丰富项目的构建能力，但这里其实是不太推荐你安装过多的其他插件的。
这是因为构建是个复杂的事情，ut-builder 本身已经实现了很多常用的构建特性，也会尽最大的努力来保证构建的稳定性。
另外，原则上 ut-builder 严格在 <a href="https://cli.vuejs.org/zh/config/" target="_blank" rel="noopener noreferrer">@vue/cli 配置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的基础上做增强，换言之你可以自己定义一些基础配置，
ut-builder 会考虑到用户自己的配置并做相应增强。其他命令行插件的构建行为也有可能会与 ut-builder 的构建行为相冲突。</p></div> <p><strong>ut-builder</strong> 提供了较丰富的 <a href="/config/builder.html">构建配置项</a>，能满足常用的 App 构建需求。这也是上面提到的，你可以把它 <strong>单独作为一个构建插件</strong> 来使用的原因。</p> <p>在这里，结合 icefox，我们看看还能多做一些什么。</p> <h2 id="使用-icefox-组件"><a href="#使用-icefox-组件" aria-hidden="true" class="header-anchor">#</a> 使用 icefox 组件</h2> <p><a href="https://github.com/icesjs/icefox" target="_blank" rel="noopener noreferrer">icefox<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 提供了一些可快速搭建企业级中后台系统框架的组件和工具，其本身也依赖于 <a href="https://element.eleme.cn/#/zh-CN" target="_blank" rel="noopener noreferrer">element-ui<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的一些基础组件。
与 element-ui 类似，我们也有两种方式来使用 icefox 提供的组件。</p> <p>一种是直接从 <a href="https://www.npmjs.com/package/icefox" target="_blank" rel="noopener noreferrer">icefox<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 包里面导入需要的组件使用。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> AsideMenu <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'icefox'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'MyComponent'</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span> AsideMenu <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>另外一种是以 <strong>vue 插件</strong> 的形式全局安装 icefox 下的所有组件。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> icefox <span class="token keyword">from</span> <span class="token string">'icefox'</span>

<span class="token comment">// 安装vue插件</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>icefox<span class="token punctuation">)</span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--  在单文件组件模板中使用 icefox 组件，组件名都以 ice- 前缀开头 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ice-aside-menu</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">提示</p> <p>由于存在依赖关系，以 vue 插件的形式安装 icefox 时，element-ui 默认也会作为插件被安装。
导入 icefox 包的同时，element-ui 的主题样式文件也会被同步导入。
换言之，如果以 vue 插件形式安装 icefox 后，你不需要再安装 element-ui 和导入其主题样式了。</p></div> <p>就像上面这样，我们可以把 icefox 里面的组件单独拿来使用，它表现得就像个第三方的组件包一样。</p> <p>下面是个引用边栏菜单组件，并通过数据来生成菜单的例子：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aside-menu</span> <span class="token attr-name">:menu-items</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">default-active</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>id_2<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span>200px</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> AsideMenu <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'icefox'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'MyComponent'</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span> AsideMenu <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      items<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">'id_1'</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'菜单项一'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">'sub'</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'子菜单'</span><span class="token punctuation">,</span> children<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">'id_2'</span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'菜单项二'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>运行结果：</p> <ul role="menubar" menu-items="[object Object],[object Object]" class="el-menu ice-aside-menu" style="background-color:;width:200px;"><li role="menuitem" tabindex="-1" class="el-menu-item ice-menu-item" style="padding-left:20px;color:;background-color:;"><span class="ice-menu-item-title">菜单项一</span></li><li role="menuitem" aria-haspopup="true" class="el-submenu ice-menu-submenu"><div class="el-submenu__title" style="padding-left:20px;color:;background-color:;"><span class="ice-menu-item-title">子菜单</span><i class="el-submenu__icon-arrow el-icon-arrow-down"></i></div><ul role="menu" class="el-menu el-menu--inline" style="background-color:;display:none;"><li role="menuitem" tabindex="-1" class="el-menu-item ice-menu-item" style="padding-left:40px;color:;background-color:;"><span class="ice-menu-item-title">菜单项二</span></li></ul></li></ul> <br> <p>是不是看起来还不错？实际上底层组件仍旧是 <a href="https://element.eleme.cn/#/zh-CN/component/installation" target="_blank" rel="noopener noreferrer">element-ui<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
的 <a href="https://element.eleme.cn/#/zh-CN/component/menu" target="_blank" rel="noopener noreferrer">Menu<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 组件，icefox 对其进行了<strong>高阶封装</strong>，
扩展了它的能力，也使得它更易于在项目中使用，还为它量身定制了一些主题样式，使得在项目中可以通过 Less 变量来定制一些风格。</p> <p>如果你想去看一下代码，<a href="https://github.com/icesjs/icefox/blob/master/lib/components/AsideMenu/AsideMenu.vue" target="_blank" rel="noopener noreferrer">AsideMenu<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 和
<a href="https://github.com/icesjs/icefox/blob/master/lib/components/Menu/ElementMenu.vue" target="_blank" rel="noopener noreferrer">Menu<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 这两个组件就是上面的实现了。</p> <p>事实上，<strong>icefox 大部分组件都是对其他基础组件的高阶封装</strong>，目前我们是基于 element-ui 来封装的，
当然也可以封装其他组件库的基础组件了，但目前我们并未打算这样去做。</p> <p>如果你熟悉了 element-ui 的使用，那么大部分 icefox 组件你也就会用了。高阶意味着属性继承，换言之，<strong>原有组件的属性及行为都会得以保留</strong>。</p> <p><strong>icefox</strong> 自己也实现了一些很不错的组件，机会留给以后，这里我们就不做过多的探讨了，下面我们可以去看看另外一些有意思的地方。</p> <h2 id="约定式路由"><a href="#约定式路由" aria-hidden="true" class="header-anchor">#</a> 约定式路由</h2> <p>约定式路由，即根据约定的目录结构和文件名称，自动生成路由配置代码及应用框架。如果你了解
<a href="https://zh.nuxtjs.org/" target="_blank" rel="noopener noreferrer">Nuxt<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 或 <a href="https://umijs.org/zh/" target="_blank" rel="noopener noreferrer">UmiJS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，那就很容易明白了。他们也是这么干的。
但这里并不是照搬他们的实现。</p> <p>事实上，受这种思想的启发，我们觉得这是个不错的提效手段，但 Nuxt 偏向于服务端渲染，
UmiJS 是 React 派系，而 icefox 趋向于辅助应用开发，并尽力帮助小伙伴们降低企业应用开发的门槛。</p> <p>如果你不喜欢以这种方式来构建你的应用，那作为一个普通的构建插件和组件包，你也能用上一些东西。如果你很感兴趣，那么我们接下来就会了解更多了。</p> <p>启用这个特性，需要开启 ut-builder 的一些配置项。在这之前，我们先来了解一下目前项目的基本结构。</p> <p>如果你是使用 @vue/cli 脚手架初始化创建的项目，那么脚手架帮你生成的项目结构会类似下面这个样子：</p> <div class="language- extra-class"><pre class="language-text"><code>.
├── node_modules                // 模块依赖安装目录
├── public                      // 公共资源文件目录
│   ├── favicon.ico
│   └── index.html              // 页面模板
├── src                         // 源码及资源目录
│   ├── assets                  // 引用静态资源目录
│   │   └── logo.png
│   ├── components              // 模块组件目录
│   │   └── HelloWorld.vue      // 模块组件
│   ├── views                   // 页面路由组件目录
│   │   ├── About.vue           // 路由组件
│   │   └── Home.vue
│   ├── App.vue                 // 路由根出口组件
│   ├── main.js                 // 应用初始化文件
│   ├── router.js               // 页面路由定义文件
│   └── store.js                // 应用状态定义文件
├── .browserslistrc             // 浏览器兼容声明文件
├── .eslintrc.js                // 代码风格检查定义文件
├── .gitignore
├── README.md
├── babel.config.js             // babel配置文件
├── package-lock.json
├── package.json
└── postcss.config.js           // postcss配置文件
</code></pre></div><p>这是一个典型的 <strong>单页应用(SPA)</strong> 项目结构。ut-builder 能够很好的支持这种结构形式的项目构建。
从控制台构建输出也能看到一些关键信息：</p> <p><img src="/assets/img/build-legacy.c5bc3be2.png" alt="普通构建模式"></p> <p><strong>启用约定式路由后，应用的初始化会被 icefox 框架接管</strong>，而我们也需要对现有的一些文件进行调整修改。
修改后的项目资源结构如下（注意 <strong>...</strong> 部分表示版面省略而非删除了）：</p> <div class="language- extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br></div><pre class="language-text"><code>.
├── ...
├── src
│   ├── assets
│   │   └── logo.png
│   ├── components
│   │   └── HelloWorld.vue
│   ├── views                   // 页面路由组件目录
│   │   ├── About.route.vue
│   │   └── Home.route.vue
│   ├── App.vue                 // 路由根出口组件
│   └── main.js                 // 应用初始化文件
├── ...
└── vue.config.js               // 构建配置文件
</code></pre></div><p>这里我们删除了 <strong>src</strong> 目录下面的 <strong>router.js</strong> 和 <strong>store.js</strong> 文件，也在<strong>项目根目录</strong>下新建了一个 <a href="https://cli.vuejs.org/zh/config/#vue-config-js" target="_blank" rel="noopener noreferrer">vue.config.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 文件（如果没有的话）。
另外，我们还修改了<strong>路由组件的文件后缀名称</strong>，将 <strong>.vue</strong> 改为了 <strong>.route.vue</strong>。</p> <div class="tip custom-block"><p class="custom-block-title">提示</p> <p>需要说明下的是，<strong>特定后缀名</strong>是为了让构建工具能够区分出那些路由组件，并生成对应的路由配置。
另外基于特定后缀名称也能很直观的知道哪些是路由组件，哪些是非路由组件。
如果你不喜欢这样的设定，后缀名也是可配置的，你甚至可以将其配置成 <strong>.vue</strong>，那么该目录下所有的单文件组件都会被当成路由组件来对待了。</p></div> <p>接下来，我们还需要修改下 <strong>main.js</strong> 文件的内容。下面是个参考：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> icefox <span class="token keyword">from</span> <span class="token string">'icefox'</span>

<span class="token keyword">const</span> requestPluginOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  baseParams<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    baseUrl<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  headers<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  title<span class="token punctuation">:</span> <span class="token string">'网站标题'</span><span class="token punctuation">,</span>

  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 应用创建完成后的回调</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 将icefox作为应用插件使用</span>
    icefox<span class="token punctuation">,</span>
    <span class="token comment">// 对内置的request插件进行配置</span>
    <span class="token punctuation">[</span><span class="token string">'request'</span><span class="token punctuation">,</span> requestPluginOptions<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>

  router<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// vue-router 配置对象</span>
    mode<span class="token punctuation">:</span> <span class="token string">'hash'</span><span class="token punctuation">,</span>
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token comment">/*router*/</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 路由器创建完成后的回调</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  store<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// Vuex Store 配置对象</span>
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token comment">/*store*/</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Store创建完成后的回调</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>现在我们暂时不需要了解 <strong>main.js</strong> 内容的具体细节，后面我们会有专门的文档来说明。
从代码我们可以看出，Vue <strong>插件的安装</strong>，以及 <strong>Router</strong>、<strong>Store</strong>、<strong>App</strong> 的实例化，都是由框架来接管的了。</p> <p>现在我们还需要更改构建配置文件，并启用代码自动生成以及 App 框架能力。这是在 <strong>vue.config.js</strong> 配置文件里通过 <code>preprocess</code> 配置项来声明的。
下面是个参考：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  pluginOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    preprocess<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 启用代码预处理</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>重新运行构建命令 <code>npm run serve</code>，不出意外的话，你应该会看到类似下面这样的控制台输出：</p> <p><img src="/assets/img/build-preprocess.209402b8.png" alt="预处理构建输出"></p> <p>而浏览器网页地址栏却变成了 <code>localhost:8080/#/404</code>，且示例的 Home 页面路由(<code>/</code>) 也没有正常显示。
不要着急，我们还需要进行一些小的调整才能使得页面显示正常。</p> <p>你可能也已经注意到了，在构建控制台里会有一个提示内容：</p> <p><img src="/assets/img/build-info-index.caf8f56a.png" alt="构建提示"></p> <p>意思是需要在 <code>src/views</code> 目录下添加一个 <code>index.route.vue</code> 单文件组件。按照提示，我们新建一个组件试试。
组件模板内容任你喜欢好了。建好后，我们再把浏览器地址更改为 <code>localhost:8080/#/</code>，是不是已经看到你刚刚创建的内容了？</p> <p>这里，我们知道了，在一个目录下面，命名为 <code>index.route.vue</code> 的单文件组件，会被当作该目录路径下的路由( <code>Layout</code> )组件。</p> <p>你也可以接着往 <code>src/views</code> 目录下添加更多的单文件组件（路由组件文件名称以 <code>.route.vue</code> 结尾）或嵌套目录。</p> <p>下面是一个随意添加的目录文件结构：</p> <div class="language- extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><div class="highlighted"> </div><br></div><pre class="language-text"><code>src/views
├── user
│   ├── vip
│   │   └── index.route.vue
│   ├── boo.vue
│   ├── detail.route.vue
│   └── index.route.vue
├── About.route.vue
├── Home.route.vue
├── Normal.vue
└── index.route.vue
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">提示</p> <p>打开浏览器(Chrome)开发者工具，通过快捷键(<code>⌘ P</code> 或 <code>Ctrl P</code>)打开资源搜索栏，键入 <code>.code/index</code>搜索，即可找到生成的路由配置代码文件。
在项目的 <code>node_modules/.code</code> 目录下，你也可以找到这一代码文件。</p></div> <p>根据以上目录文件结构，生成的路由配置代码如下：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'hash'</span><span class="token punctuation">,</span>
  base<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      filePath<span class="token punctuation">:</span> <span class="token string">'src/views/index.route.vue'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
      path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
      component<span class="token punctuation">:</span> compIndex<span class="token punctuation">,</span>
      props<span class="token punctuation">:</span> mapRouteParamsToProps<span class="token punctuation">,</span>
      children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          filePath<span class="token punctuation">:</span> <span class="token string">'src/views/user/index.route.vue'</span><span class="token punctuation">,</span>
          name<span class="token punctuation">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span>
          path<span class="token punctuation">:</span> <span class="token string">'/user'</span><span class="token punctuation">,</span>
          component<span class="token punctuation">:</span> compUserIndex<span class="token punctuation">,</span>
          props<span class="token punctuation">:</span> mapRouteParamsToProps<span class="token punctuation">,</span>
          children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
              filePath<span class="token punctuation">:</span> <span class="token string">'src/views/user/detail.route.vue'</span><span class="token punctuation">,</span>
              name<span class="token punctuation">:</span> <span class="token string">'user/detail'</span><span class="token punctuation">,</span>
              path<span class="token punctuation">:</span> <span class="token string">'detail'</span><span class="token punctuation">,</span>
              component<span class="token punctuation">:</span> compUserDetail<span class="token punctuation">,</span>
              props<span class="token punctuation">:</span> mapRouteParamsToProps<span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              filePath<span class="token punctuation">:</span> <span class="token string">'src/views/user/vip/index.route.vue'</span><span class="token punctuation">,</span>
              name<span class="token punctuation">:</span> <span class="token string">'user/vip'</span><span class="token punctuation">,</span>
              path<span class="token punctuation">:</span> <span class="token string">'vip'</span><span class="token punctuation">,</span>
              component<span class="token punctuation">:</span> compUserVipIndex<span class="token punctuation">,</span>
              props<span class="token punctuation">:</span> mapRouteParamsToProps<span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      filePath<span class="token punctuation">:</span> <span class="token string">'src/views/About.route.vue'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'About'</span><span class="token punctuation">,</span>
      path<span class="token punctuation">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span>
      component<span class="token punctuation">:</span> compAbout<span class="token punctuation">,</span>
      props<span class="token punctuation">:</span> mapRouteParamsToProps<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      filePath<span class="token punctuation">:</span> <span class="token string">'src/views/Home.route.vue'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span>
      path<span class="token punctuation">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>
      component<span class="token punctuation">:</span> compHome<span class="token punctuation">,</span>
      props<span class="token punctuation">:</span> mapRouteParamsToProps<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>其中一些变量是对导入组件的引用。另外，在构建控制台也会有以下提示内容：</p> <p><img src="/assets/img/build-info-router.ce219a5d.png" alt="构建路由提示"></p> <p>正如你所看到的那样，创建或更新路由组件文件后，构建工具会自动生成新的代码，并作出相应的提示。
这一过程中你也不需要重新启动构建。
ut-builder 提供了 <code>3</code> 种模式来生成路由代码，并完善支持动态参数路由、命名路由以及嵌套子路由。
这里我们不作过多的展开，后面会有专门的文档。如果你想再多尝试几下的话，这里有一些提示也许能帮到你：</p> <div class="tip custom-block"><p class="custom-block-title">提示</p> <p><code>preprocess</code> 配置项可使用对象传参，属性 <code>appNestedRoutes</code> 可指定嵌套模式， 有 3 个枚举值，分别为 <code>auto</code>、<code>manual</code>、<code>none</code>。
默认为 <code>auto</code> 模式。<code>manual</code> 模式下，目录名称以<code>[]</code>包裹的，表示需要生成嵌套子路由。任意模式下名称以 <code>~</code> 开头的路由文件或目录，将会提升为根路由子节点。
以 <code>@</code> 开头的路由文件或目录，表示命名路由，而以 <code>_</code> 开头的表示动态参数路由，动态参数路由以 <code>_</code> 结尾表示可选参数。<code>@</code> 和 <code>_</code> 这两个符号可通过配置来变更。</p></div> <p>基于以上了解，我们就可以将示例的 <code>Home</code> 组件对应的路由页面重新显示出来了，访问 <code>/home</code> 路由即可。
你也可以修正下示例 <code>src/App.vue</code> 文件内的路由链接地址信息。</p> <p>另外你也许会疑惑，基于 icefox 的应用框架，又该怎样引入 store.js 文件呢？这个在进阶的
<a href="/guide/store-module.html">Store 模块化</a> 里面，我们会有专门的讲解。</p> <h2 id="接口请求与-mock"><a href="#接口请求与-mock" aria-hidden="true" class="header-anchor">#</a> 接口请求与 Mock</h2> <p>我们的应用一般需要与后端服务进行交互，这就要用到远程请求了。icefox 的应用框架（<strong>需启用约定式路由</strong>），基于
<a href="https://www.npmjs.com/package/axios" target="_blank" rel="noopener noreferrer">axios<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 封装了发送 HTTP 请求的能力，且作为一个插件默认被安装进了应用中。</p> <p>你可以通过以下几种方式来调用请求插件：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token comment">// 在组件中</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/xxx'</span><span class="token punctuation">)</span>

<span class="token comment">// 在非组件中</span>
Vue<span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/xxx'</span><span class="token punctuation">)</span>

<span class="token comment">// 在 Store 的 actions 中</span>
<span class="token keyword">async</span> <span class="token function">someAction</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>call<span class="token punctuation">,</span> dispatch<span class="token punctuation">}</span><span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'/api/xxx'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">提示</p> <p>请求插件 <code>$http</code> 是对 <code>axios</code> 的&quot;高阶&quot;扩展封装，因此 <code>axios</code> 的所有能力及使用方式，都可以被运用。换言之，如果你熟悉了 <code>axios</code> 的使用方式，
<code>$http</code> 就是 <code>axios</code> 的&quot;别名&quot;而已。但这并不是简单的引用，后面我们会有专门的文档说明。如果你对源码感兴趣的话，
<a href="https://github.com/icesjs/icefox/blob/master/lib/plugins/request.js" target="_blank" rel="noopener noreferrer">request<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 插件正是这个封装的实现。</p></div> <p>我们在示例项目的 <code>Home.route.vue</code> 单文件组件里演示下发送请求的操作。这里我们模拟一个获取用户姓名并在页面上显示问候语的场景。
先来作一些小的修改，添加一点请求服务端接口的逻辑：</p> <div class="language-vue extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Vue logo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>../assets/logo.png<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HelloWorld</span> <span class="token attr-name">:msg</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>msg<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// @ is an alias to /src</span>
<span class="token keyword">import</span> HelloWorld <span class="token keyword">from</span> <span class="token string">'@/components/HelloWorld.vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Home'</span><span class="token punctuation">,</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span> HelloWorld <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      msg<span class="token punctuation">:</span> <span class="token string">'Welcome!'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token keyword">async</span> <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 发送请求，加载用户信息</span>
    <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`{baseUrl}/api/user/info`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>data
    <span class="token comment">// 更新并显示问候语</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, Welcome!`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">提示</p> <p>我们在示例代码里面应用了 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/async_function" target="_blank" rel="noopener noreferrer">async/await<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 语法。
另外，在编写异步请求代码时，推荐大家都采用这种语法形式。</p></div> <p>访问 <code>/home</code> 路由页面（以下均同），打开浏览器（<strong>Chrome</strong>）的开发者工具，切换至 <code>Network</code> 面板，我们可以看到地址为 <code>/api/user/info</code> 的请求已经被浏览器发送了。
因为没有合适的服务端接口，这里我们会看到一个状态码为 <code>404</code> 的请求响应。</p> <p>也许你已经注意到了示例代码中的请求地址 <code>{baseUrl}/api/user/info</code>，其中包含一个 <code>{baseUrl}</code> 的占位变量（<strong>注意占位变量前面并没有 ES6 模板字符串的 <code>$</code> 引导符号</strong>）。
我们可以声明下这个占位变量的值。</p> <p>如果你还记得前面 <code>main.js</code> 示例代码的话，里面就有这个变量的声明，它是在内置的 HTTP 请求插件的配置对象属性 <code>baseParams</code> 里定义的。</p> <div class="tip custom-block"><p class="custom-block-title">提示</p> <p>变量名 <code>baseUrl</code> 只是示例需要而已（注意区别 <code>axios</code> 配置参数 <code>baseURL</code> ），你可以定义成任何你喜欢的名称。实际上 <code>baseParams</code> 是插件在 <code>axios</code> 配置的基础上扩展出的配置项，
它提供了一种便捷的方式来使用一些与请求相关的常量或参数值。你可以在请求地址里面方便的嵌入这些常量或参数值，而不需要频繁地在组件中通过模块导入的形式来引入这些值。</p></div> <p>我们可以给这个 <code>baseUrl</code> 赋上远程服务器地址的值，例如：<code>10.0.2.68:8088</code> 。再次查看接口请求信息，你会发现请求服务器地址已经变更为刚刚配置的地址值。</p> <p>为了模拟服务端接口响应，我们接下来启用构建工具提供的接口 <strong>Mock 与代理</strong> 能力。启用方式也很便捷，在 <code>vue.config.js</code>
配置文件的插件配置项里，声明 <code>mock</code> 服务配置即可。下面是个参考：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  pluginOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    preprocess<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      appNestedRoutes<span class="token punctuation">:</span> <span class="token string">'auto'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 构建服务配置</span>
    services<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      mock<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 启用mock服务</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">提示</p> <p>插件配置项名 <code>services</code> 需要 <code>vue-cli-plugin-ut-builder</code> 版本在 <code>2.1.4</code> 以上。<code>低于 2.1.4</code> 的版本，请使用 <code>service</code> 。</p></div> <p>更新 <code>vue.config.js</code> 配置文件，手动重启构建服务，等待构建完成后，刷新页面继续查看接口 <code>/api/user/info</code> 的网络请求，你会发现请求服务器地址已经变更为本机地址。</p> <p>查看示例项目的根目录，可以看到有一个新的文件夹被自动创建了，其目录文件结构如下：</p> <div class="language- extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-text"><code>mock
├── api
│   └── user.js
├── mock.data.json
└── mock.demo.js
</code></pre></div><p>打开 <code>api/user.js</code> 文件，我们可以看到，构建工具早已帮我们创建好了接口响应声明（ <code>GET /api/user/info</code> ）。
因为后面会有专门的文档来讲解 Mock 模块的使用，这里我们先返回一些数据，好让页面能够正确获取到用户信息。下面是个参考：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token keyword">import</span> Mock <span class="token keyword">from</span> <span class="token string">'mockjs'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> delay <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> disabled <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// 接口响应定义</span>
  <span class="token string">'GET /api/user/info'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Mock<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'@cname(2, 4)'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">提示</p> <p>默认参数设定下，自动生成的 mock 模块中，<code>disabled</code> 变量的值是为 <code>false</code> 的。你需要将其改为 <code>true</code>，才会使得该 mock 模块生效。
另外，这些默认设定也可以通过 mock 构建服务的配置参数来变更。如果启用了应用框架能力，mock 能力也会根据不同的构建模式与应用无缝衔接。</p></div> <p>刷新页面试试，是不是已经能够看到页面上带称谓的问候语了？
接下来你也可以尝试下禁用 mock，或者更改接口响应返回值，看看网页上的接口请求及响应会发生怎样的变化。</p> <div class="tip custom-block"><p class="custom-block-title">提示</p> <p><strong>Mock</strong> 能力是 ut-builder 的特性之一。支持自动代理无缝衔接应用，可根据接口请求信息自动生成 mock 模块文件并定位至代码行，
以及根据远程接口数据自动生成 <a href="http://mockjs.com/" target="_blank" rel="noopener noreferrer">MockJS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 随机数据生成代码。mock 模块文件可使用 es6 语法，支持实时转译更新。
可设置延时响应时长，也支持模块以及模块内单个接口的本地与远程响应实时切换。
另外，对于 <code>WebSocket</code> 的模拟，也提供了与构建无缝衔接的精美网页客户端应用，可手动或自动模拟 <code>socket</code> 推送数据，
并支持常见的浏览器端 <code>websocket</code> 协议实现（websocket、sockjs、socket.io、STOMP）。</p></div> <h2 id="发布预览与部署"><a href="#发布预览与部署" aria-hidden="true" class="header-anchor">#</a> 发布预览与部署</h2> <p>在开发构建模式( <code>development</code> )下，构建系统默认会开启一个开发服务器，来响应我们应用的资源访问以及热更新请求。</p> <p>在产品构建模式( <code>production</code> )下，为更好的了解应用的资源情况，以及验证待发布应用的正确性，ut-builder 提供了一个
<code>stage</code> 构建命令，用以实现待发布应用的资源预览。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 以产品模式构建应用，并开启一个Web应用服务器</span>
<span class="token function">npm</span> run stage
</code></pre></div><p>运行 <code>stage</code> 构建命令后，应用会以产品模式进行构建，并在构建结束后开启一个应用服务器。
通过应用服务器，我们可以直接访问应用的页面，也可以在特定的资源路径下查看应用的资源内容。</p> <p><img src="/assets/img/build-command-stage.f485f325.png" alt="资源预览"></p> <div class="tip custom-block"><p class="custom-block-title">提示</p> <p>应用服务器会结合构建参数，正确的执行资源访问代理。
换言之，这里会考虑应用的 <strong>history</strong> 路由模式( <code>historyApiFallback</code> )，以及资源部署路径为虚拟主机目录( <code>publicPath</code> )的情况。</p></div> <p>如果需要将应用的资源发布到远程服务器上，一般情况下，我们会运用 <strong>ssh</strong> 工具，并配合 <strong>bash</strong> 命令脚本来完成此任务。
ut-builder 也提供了一个 <code>deploy</code> 命令，用于交互式地部署应用资源到远程服务器的特定目录路径下。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 以产品模式构建应用，并交互式地部署应用至远程服务器(ssh)</span>
<span class="token function">npm</span> run deploy
</code></pre></div><p>交互式终端部分输出内容如下：</p> <p><img src="/assets/img/build-command-deploy.471d6c91.png" alt="资源部署"></p> <div class="tip custom-block"><p class="custom-block-title">提示</p> <p>部署命令在交互式部署过程中使用的 ssh 由纯 js 实现，这意味着非 Linux 内核系统（Windows）的电脑，也能够直接运行该命令。
连接远程服务器时，除密码外，还可以使用公钥来进行登录验证。另外，也可以通过配置文件，实现无人干预的自动化部署。</p></div> <p>发布预览和部署命令提供了一种可能性来提升我们应用的发布效率。
此外，这两个命令也提供了多个命令行参数，为多样化构建提供一定的支持。</p> <p>你可以通过以下方式来获取帮助信息：</p> <div class="language-bash extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br></div><pre class="language-bash"><code><span class="token comment"># 查看所有可用的构建命令</span>
npx vue-cli-service <span class="token function">help</span>

<span class="token comment"># 查看具体命令的可用选项</span>
npx vue-cli-service <span class="token function">help</span> <span class="token punctuation">[</span>command<span class="token punctuation">]</span>

<span class="token comment"># 查看stage命令的可用选项</span>
npx vue-cli-service <span class="token function">help</span> stage

<span class="token comment"># 查看deploy命令的可用选项</span>
npx vue-cli-service <span class="token function">help</span> deploy
</code></pre></div><p>注：<code>npx</code> 命令需要安装 <strong>5.2</strong> 以上版本的 <strong>npm</strong> 。</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/icesjs/ices/edit/master/docs/guide/getting-started.md" target="_blank" rel="noopener noreferrer">在 Github 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最后更新: </span> <span class="time">10/3/2020, 8:58:38 AM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/guide/introduce.html" class="prev">
          介绍
        </a></span> <span class="next"><a href="/guide/mock.html">
          Mock 数据
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.488be3da.js" defer></script><script src="/assets/js/2.3e762a60.js" defer></script>
  </body>
</html>
